---
import { getTranslations } from "@/utils/i18n";
import CopyEmailButton from "@/components/ui-react/CopyEmailButton";

const t = getTranslations("es");
const email = "fravelz@proton.me";
---

<section id="contacto" class="py-16 px-4 sm:px-6 lg:px-8">
    <div class="max-w-2xl mx-auto">
        <h2
            class="text-center text-3xl font-bold mb-2 bg-gradient-to-r from-cyan-400 to-purple-400 bg-clip-text text-transparent"
            data-i18n="contact_title"
        >
            {t.contact_title}
        </h2>
        <p
            class="text-center text-slate-600 dark:text-gray-400 mb-8"
            data-i18n="contact_subtitle"
        >
            {t.contact_subtitle}
        </p>

        <div
            class="rounded-2xl border-2 border-cyan-200/60 dark:border-cyan-500/30 bg-white/50 dark:bg-gray-800/50 p-6 sm:p-8 shadow-lg shadow-cyan-500/10 dark:shadow-none"
        >
            <!-- Opción 1: Copiar correo -->
            <div
                class="flex flex-col sm:flex-row items-center justify-center gap-4 mb-8 pb-8 border-b border-slate-200 dark:border-gray-600"
            >
                <span
                    class="text-sm font-medium text-slate-700 dark:text-gray-300"
                    data-i18n="contact_copy_label"
                >
                    {t.contact_copy_label}
                </span>
                <CopyEmailButton
                    client:load
                    email={email}
                    successText={t.hero_copy_success}
                />
            </div>

            <!-- Opción 2: Formulario (abre tu cliente de correo) -->
            <form id="contact-form" class="space-y-5">
                <div>
                    <label
                        for="contact-name"
                        class="block text-sm font-medium text-slate-700 dark:text-gray-300 mb-1"
                        data-i18n="contact_name_label"
                    >
                        {t.contact_name_label}
                    </label>
                    <input
                        type="text"
                        id="contact-name"
                        name="name"
                        required
                        class="w-full px-4 py-2.5 rounded-lg bg-slate-50 dark:bg-gray-800 border-2 border-cyan-200/60 dark:border-cyan-500/30 text-slate-900 dark:text-gray-100 focus:ring-2 focus:ring-cyan-500 focus:border-cyan-500 dark:focus:border-cyan-400 transition-colors"
                        data-i18n-placeholder="contact_name_placeholder"
                        placeholder={t.contact_name_placeholder}
                    />
                </div>
                <div>
                    <label
                        for="contact-email"
                        class="block text-sm font-medium text-slate-700 dark:text-gray-300 mb-1"
                        data-i18n="contact_email_label"
                    >
                        {t.contact_email_label}
                    </label>
                    <input
                        type="email"
                        id="contact-email"
                        name="email"
                        required
                        class="w-full px-4 py-2.5 rounded-lg bg-slate-50 dark:bg-gray-800 border-2 border-cyan-200/60 dark:border-cyan-500/30 text-slate-900 dark:text-gray-100 focus:ring-2 focus:ring-cyan-500 focus:border-cyan-500 dark:focus:border-cyan-400 transition-colors"
                        data-i18n-placeholder="contact_email_placeholder"
                        placeholder={t.contact_email_placeholder}
                    />
                </div>
                <div>
                    <label
                        for="contact-subject"
                        class="block text-sm font-medium text-slate-700 dark:text-gray-300 mb-1"
                        data-i18n="contact_subject_label"
                    >
                        {t.contact_subject_label}
                    </label>
                    <input
                        type="text"
                        id="contact-subject"
                        name="subject"
                        required
                        class="w-full px-4 py-2.5 rounded-lg bg-slate-50 dark:bg-gray-800 border-2 border-cyan-200/60 dark:border-cyan-500/30 text-slate-900 dark:text-gray-100 focus:ring-2 focus:ring-cyan-500 focus:border-cyan-500 dark:focus:border-cyan-400 transition-colors"
                        data-i18n-placeholder="contact_subject_placeholder"
                        placeholder={t.contact_subject_placeholder}
                    />
                </div>
                <div>
                    <label
                        for="contact-message"
                        class="block text-sm font-medium text-slate-700 dark:text-gray-300 mb-1"
                        data-i18n="contact_message_label"
                    >
                        {t.contact_message_label}
                    </label>
                    <textarea
                        id="contact-message"
                        name="message"
                        rows="4"
                        required
                        class="w-full px-4 py-2.5 rounded-lg bg-slate-50 dark:bg-gray-800 border-2 border-cyan-200/60 dark:border-cyan-500/30 text-slate-900 dark:text-gray-100 focus:ring-2 focus:ring-cyan-500 focus:border-cyan-500 dark:focus:border-cyan-400 transition-colors resize-y min-h-[100px]"
                        data-i18n-placeholder="contact_message_placeholder"
                        placeholder={t.contact_message_placeholder}></textarea>
                </div>
                <button
                    type="submit"
                    class="w-full py-3 px-6 rounded-xl font-semibold bg-gradient-to-r from-cyan-500 to-purple-500 text-white hover:from-cyan-600 hover:to-purple-600 focus:ring-2 focus:ring-cyan-500 focus:ring-offset-2 dark:focus:ring-offset-gray-900 transition-all shadow-lg shadow-cyan-500/25"
                    data-i18n="contact_send_btn"
                >
                    {t.contact_send_btn}
                </button>
                <p
                    class="text-xs text-center text-slate-500 dark:text-gray-500"
                    data-i18n="contact_mailto_hint"
                >
                    {t.contact_mailto_hint}
                </p>
            </form>
        </div>
    </div>
</section>

<script define:vars={{ email }}>
    const form = document.getElementById("contact-form");
    if (form) {
        form.addEventListener("submit", (e) => {
            e.preventDefault();
            const name = document.getElementById("contact-name").value.trim();
            const from = document.getElementById("contact-email").value.trim();
            const subject = document
                .getElementById("contact-subject")
                .value.trim();
            const message = document
                .getElementById("contact-message")
                .value.trim();
            const body = `${message}\n\n---\nEnviado por: ${name} (${from})`;
            const mailto = `mailto:${email}?subject=${encodeURIComponent(subject)}&body=${encodeURIComponent(body)}`;
            window.location.href = mailto;
        });
    }
</script>
